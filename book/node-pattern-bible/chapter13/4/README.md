https://smw0807.notion.site/Request-Reply-0d930e2e497a411cb9e7db5f2001a7b6?pvs=4

# 13-4 요청(Request)/응답(Reply) 패턴

단방향 통신은 병렬성과 효율성 측면에서 큰 이점을 제공할 수 있지만, 이것 만으로는 모든 통합 및 통신 문제를 해결할 수 없다.  
때로는 오래된 요청-응답 패턴이 작업을 위한 완벽한 도구일 수가 있다.  
그러나 우리가 가진 모든 것이 비동기 단방향 채널인 상황일 수 있다.  
따라서 단방향 채널에서 요청-응답 방식으로 메시지를 교환할 수 있는 추상화를 만드는데 필요한 다양한 패턴과 접근 방식을 알아야 할 필요가 있다.

## 13-4-1 상관 식별자

첫 번째 요청-응답 패턴은 **상관 식별자(Correlation Identifier)**이다.  
단방향 채널 위에 요청-응답의 추상화를 만들기 위한 기본 블럭을 말한다.

이 패턴은 각 요청을 식별자로 표시하고, 수신자에 의해 응답(response)에 첨부된다.  
이렇게 하면 요청 전송자가 두 메시지를 상호 연결하고 응답을 적절한 처리자(handler)에게 반환할 수 있다.  
이는 단방향 비동기 채널의 맥락에서 메시지가 언제든지 어느 방향으로든 이동해야 하는 문제를 자연스럽게 해결한다.

![상관 식별자를 사용한 요청-응답 메시지 교환](https://prod-files-secure.s3.us-west-2.amazonaws.com/bc261f43-de91-483d-8946-ac5a65106576/7e813547-0b97-44ef-99fb-d06ea9e2d3fb/Untitled.png)

상관 식별자를 사용한 요청-응답 메시지 교환

위 그림의 시나리오는 상관관계 ID를 사용하여 각 응답이 다른 순서로 전송되고 수신되는 경우에도 각 응답을 적절한 요청과 매칭시키는 방법을 보여준다.

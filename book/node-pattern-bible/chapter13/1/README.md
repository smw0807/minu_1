https://smw0807.notion.site/2a76de34082c4bb2afde92b7f8790510

# 13-1 메시징 시스템의 기초

메시징 시스템에 대해 고려해야 할 네 가지 기본 요소가 있다.

- 단방향 혹은 요청/응답 교환과 같은 통신방향
- 내용을 결정하는 메시지의 목적
- 컨텍스트 안(동기식) 또는 컨텍스트 밖(비동기식)으로 송수신할 수 있는 메시지 타이밍
- 직접 또는 브로커를 통해 발생할 수 있는 메시지 전달 유형

## 13-1-1 단방향 대 요청/응답 패턴

메시징 시스템에서 가장 기본적인 측면은 통신의 방향이며, 종종 메시지의 의미도 결정한다.  
가장 간단한 통신 패턴은 메시지가 소스에서 대상으로 한 방향으로 푸시되는 것이다.

![단방향 통신](https://prod-files-secure.s3.us-west-2.amazonaws.com/bc261f43-de91-483d-8946-ac5a65106576/36dc3706-e1fe-4836-a01b-5500bba8b165/Untitled.png)

단방향 통신

단방향 통신의 일반적인 예는 WebSocket을 사용하여 연결된 브라우저에 메시지를 보내는 이메일, 웹 서버 혹은 일련의 작업자에게 작업을 배포하는 시스템이다.

그리고 한 방향의 메시지가 항상 반대 방향의 메시지와 한 쌍을 이루는 요청/응답 교환 패턴이 있다.  
이 메시지 교환 패턴의 전형적인 예는 웹 서비스를 호출하거나 데이터베이스에 쿼리를 보내는 것이다.

![요청/응답 메시지 교환 패턴](https://prod-files-secure.s3.us-west-2.amazonaws.com/bc261f43-de91-483d-8946-ac5a65106576/42ee00dc-f407-4f5b-8ddd-6f52ea9ee860/Untitled.png)

요청/응답 메시지 교환 패턴

요청/응답 패턴을 구현하는 것이 사소하게 보일 수 있겠지만 통신 채널이 비동기적이거나 여러 노드를 포함하는 경우 더 복잡해진다.

![멀티노드 요청/응답 통신](https://prod-files-secure.s3.us-west-2.amazonaws.com/bc261f43-de91-483d-8946-ac5a65106576/1ac13406-5486-4c7c-a8be-7ed8283b0e18/Untitled.png)

멀티노드 요청/응답 통신

위 그림을 보면 각각의 두 노드 사이의 통신 방향을 고려하면 확실히 단방향 통신이라고 말할 수 있다.  
그러나 전체 관점에서 메시지 생성자는 요청을 보낸 후 해당 요청에 대한 다른 노드가 보낸 응답도 수신한다.  
이와 같은 상황에서 요청/응답 패턴과 순수 단방향 루프의 차이점은 요청과 응답 사이의 관계로, 이것은 메시;지 생성자에 달려있다.  
응답은 일반적으로 요청과 동일한 컨텍스트에서 처리된다.

# 9-4 λ°λ³µμ ν¨ν„΄ (Iterator)

λ°λ³µμ ν¨ν„΄μ€ κΈ°λ³Έμ μΈ ν¨ν„΄μΌλ΅ λ§¤μ° μ¤‘μ”ν•κ³  μΌλ°μ μΌλ΅ μ‚¬μ©λλ―€λ΅ ν”„λ΅κ·Έλλ° μ–Έμ–΄ μμ²΄μ— λ‚΄μ¥λλ‹¤.  
JavaScript(ECMAScript 2015 μ‚¬μ–‘μ—μ„ μ‹μ‘)λ¥Ό λΉ„λ΅―ν•μ—¬ λ¨λ“  μ£Όμ” ν”„λ΅κ·Έλλ° μ–Έμ–΄μ—μ„ μ–΄λ–¤ λ°©μ‹μΌλ΅λ“  μ΄ ν¨ν„΄μ„ κµ¬ν„ν•κ³  μλ‹¤.

λ°λ³µμ ν¨ν„΄μ€ λ°°μ—΄ λλ” νΈλ¦¬ λ°μ΄ν„° κµ¬μ΅°μ™€ κ°™μ€ μ»¨ν…μ΄λ„μ μ”μ†λ“¤μ„ λ°λ³µν•κΈ° μ„ν• κ³µν†µ μΈν„°νμ΄μ¤ λλ” ν”„λ΅ν† μ½μ„ μ •μν•λ‹¤.  
μΌλ°μ μΌλ΅ μ»¨ν…μ΄ν„°μ μ”μ†λ“¤μ„ λ°λ³µν•λ” μ•κ³ λ¦¬μ¦μ€ λ°μ΄ν„°μ μ‹¤μ  κµ¬μ΅°μ— λ”°λΌ λ‹¤λ¥΄λ‹¤.  
λ°°μ—΄μ κ²½μ° λ‹¨μν• λ£¨ν”„λ§μ΄ ν•„μ”ν•λ‹¤.  
νΈλ¦¬λ” λ” λ³µμ΅ν• νΈλ¦¬ μν μ•κ³ λ¦¬μ¦μ΄ ν•„μ”ν•λ‹¤.(https://en.wikipedia.org/wiki/Tree_traversal)  
λ°λ³µμ ν¨ν„΄μ„ μ‚¬μ©ν•λ©΄ μ‚¬μ©μ¤‘μΈ μ•κ³ λ¦¬μ¦ λλ” λ°μ΄ν„° κµ¬μ΅°μ— λ€ν• μ„Έλ¶€ μ •λ³΄λ” μ¨κΈ°κ³  λ¨λ“  μ ν•μ μ»¨ν…μ΄λ„λ¥Ό λ°λ³µν•λ”λ° ν•„μ”ν• κ³µν†µμ μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•λ‹¤.  
λ³Έμ§μ μΌλ΅ λ°λ³µμ ν¨ν„΄μ„ μ‚¬μ©ν•λ©΄ μν μ—°μ‚°μ κ²°κ³Ό(μ”μ†)λ¥Ό μ²λ¦¬ν•λ” λ°©μ‹κ³Ό μν μ•κ³ λ¦¬μ¦μ κµ¬ν„μ„ λ¶„λ¦¬ν•  μ μλ‹¤.

κ·Έλ¬λ‚ JavaScriptμ—μ„ λ°λ³µμλ” μ΄λ²¤νΈ μ΄λ―Έν„°μ™€ μ¤νΈλ¦Όμ²λΌ λ°λ“μ‹ μ»¨ν…μ΄λ„μΌ ν•„μ” μ—†μ΄ λ‹¤λ¥Έ μ ν•μ κµ¬μ΅°μ—μ„λ„ μ λ™μ‘ν•λ‹¤.  
λ”°λΌμ„ λ°λ³µμ ν¨ν„΄μ€ μμ„λ€λ΅ μƒμ„±λκ±°λ‚ μ΅°νλ μ”μ†λ“¤μ„ λ°λ³µν•λ” μΈν„°νμ΄μ¤λ¥Ό μ •μν•κ³  μλ‹¤κ³  μΌλ°ν™”ν•μ—¬ λ§ν•  μ μμ„ κ²ƒμ΄λ‹¤.

## 9-4-1 λ°λ³µμ(Iterator) ν”„λ΅ν† μ½

JavaScriptμ—μ„ λ°λ³µμ ν¨ν„΄μ€ μƒμ†κ³Ό κ°™μ€ ν•μ‹μ μΈ κµ¬μ΅°λ³΄λ‹¤λ” ν”„λ΅ν† μ½μ„ ν†µν•΄ κµ¬ν„λλ‹¤.  
μ΄κ²ƒμ€ λ³Έμ§μ μΌλ΅ λ°λ³µμ ν¨ν„΄μ κµ¬ν„μμ™€ μ†λΉ„μκ°„μ μƒνΈμ‘μ©μ΄ μ‚¬μ „μ— ν•©μλ ν•νƒμ μΈν„°νμ΄μ¤μ™€ κ°μ²΄λ¥Ό μ΄μ©ν•λ‹¤λ” κ²ƒμ„ μλ―Έν•λ‹¤.

JavaScriptμ— μμ–΄μ„ λ°λ³µμ ν¨ν„΄μ„ κµ¬ν„ν•λ” μ‹μ‘μ μ€ κ°’λ“¤μ μ‹ν€€μ¤λ¥Ό μƒμ„±ν•κΈ° μ„ν• μΈν„°νμ΄μ¤λ¥Ό μ •μν•λ” β€**λ°λ³µμ ν”„λ΅ν† μ½**β€™(iterator protocol)μ΄λ‹¤.  
ν•¨μκ°€ νΈμ¶λ  λ•λ§λ‹¤ ν•¨μλ” λ°λ³µμ λ‹¤μ μ”μ†λ¥Ό κ°μ²΄μ— λ‹΄μ•„ λ°ν™ν•λ©° μ΄λ¥Ό β€**λ°λ³µμ κ²°κ³Ό**β€™(iterator result)λΌ ν•λ‹¤.

<aside>
π’΅ λ°λ³µμκ°€ μ¶”κ°€μ μΈ μ†μ„±μ„ λ°ν™ν•λ” κ²ƒμ„ λ§‰μ„ μλ” μ—†λ‹¤.   
κ·Έλ¬λ‚ μ΄λ¬ν• μ†μ„±μ€ λ‚΄μ¥λ κµ¬μ΅°λ‚ λ°λ³µμλ¥Ό μ‚¬μ©ν•λ” APIμ— μν•μ—¬ λ¬΄μ‹λ  κ²ƒμ΄λ‹¤.

</aside>

```tsx
const A_CHAR_CODE = 65;
const Z_CHAR_CODE = 90;
/**
String.fromCodePoint() λ©”μ†λ“
μ΄ λ©”μ†λ“λ” μ‰Όν‘λ΅ κµ¬λ¶„λλ” μΌλ ¨μ μ½”λ“ ν¬μΈνΈ(code point)μ— ν•΄λ‹Ήν•λ” λ¬Έμλ“¤λ΅ κµ¬μ„±λ λ¬Έμμ—΄μ„ λ°ν™ν•©λ‹λ‹¤.
 */
function createAlphabetIterator() {
  let currCode = A_CHAR_CODE;

  return {
    next() {
      const currChar = String.fromCodePoint(currCode);
      console.log('currChar : ', currChar);
      if (currChar > Z_CHAR_CODE) {
        return { done: true };
      }
      currCode++;
      return { value: currChar, done: false };
    },
  };
}
```

next() ν•¨μλ¥Ό νΈμ¶ν•  λ•λ§λ‹¤ λ¬Έμμ— ν•΄λ‹Ήν•λ” λ¬Έμμ½”λ“λ¥Ό λ‚νƒ€λ‚΄λ” μ«μλ¥Ό μ¦κ°€μ‹ν‚¤κ³  μ΄λ¥Ό λ¬Έμλ΅ λ³€ν™ν• λ‹¤μ, λ°λ³µμ ν”„λ΅ν† μ½μ— μ •μλ κ°μ²΄μ ν•μ‹μ„ μ‚¬μ©ν•μ—¬ λ°ν™ν•λ‹¤.  
μ£Όλ©ν•΄μ•Ό ν•  μ¤‘μ”ν• μΈ΅λ©΄μ€ λ°λ³µμμ ν„μ¬ μ„μΉλ¥Ό μ–΄λ–¤ λ°©μ‹μΌλ΅λ“  μ¶”μ ν•΄μ•Ό ν•κΈ° λ•λ¬Έμ— λ§μ€ κ²½μ° λ°λ³µμλ” μƒνƒμ €μ¥ κ°μ²΄λΌλ” κ²ƒμ΄λ‹¤.  
λ°λ³µμλ” μ‹¤μ λ΅ μ™„μ „ν μƒνƒ λΉ„μ €μ¥μΌ μλ„ μλ‹¤.  
μλ¥Ό λ“¤μ–΄ λ¬΄μ‘μ„ μ”μ†λ¥Ό λ°ν™ν•κ³  λ¬΄μ‘μ„λ΅ μΆ…λ£ν•κ±°λ‚ λ¬΄ν• λ°λ³µμ„ ν•λ” λ°λ³µμκ±°λ‚ μ²« λ²μ§Έ λ°λ³µμ—μ„ μ¤‘μ§€ν•λ” λ°λ³µμλ¥Ό μλ΅ λ“¤ μ μλ‹¤.

μ„μ— λ§λ“  λ°λ³µμλ¥Ό μ‚¬μ©ν•λ” λ°©λ²•μ„ μ‚΄ν΄λ³΄μ.

```tsx
const iterator = createAlphabetIterator();

let iteratorResult = iterator.next();
while (!iterator.done) {
  console.log(iterator.value);
  iteratorResult = iterator.next();
}
```

μ½”λ“μ—μ„ μ• μ μλ“―μ΄ λ°λ³µμλ¥Ό μ‚¬μ©ν•λ” μ½”λ“λ” ν¨ν„΄ μμ²΄λ΅ κ°„μ£Όλ  μ μλ‹¤.

<aside>
π’΅ λ°λ³µμλ” μ„ νƒμ μΌλ΅ λ‘ κ°€μ§€ μ¶”κ°€μ μΈ ν•¨μ return([value]) λ° throw(error)λ¥Ό μ§€μ •ν•  μ μλ‹¤.   
μ²« λ²μ§Έλ” κ·μ•½μ— λ”°λΌ μ‚¬μ©μκ°€ λ°λ³µμ΄ μ™„λ£λκΈ° μ „μ— μ¤‘λ‹¨ν–μμ„ μ•λ¦¬λ”λ° μ‚¬μ©λκ³ ,   
λ‘ λ²μ§Έλ” μ¤λ¥κ°€ λ°μƒ ν–μμ„ λ°λ³µμμ— μ „λ‹¬ν•λ”λ° μ‚¬μ©λλ‹¤.   
λ‘ ν•¨μ λ¨λ‘ κΈ°λ³Έμ μΈ λ°λ³µμμ—μ„λ” κ±°μ μ‚¬μ©λμ§€ μ•λ”λ‹¤.

</aside>

## 9-4-2 λ°λ³µκ°€λ¥μ(iterable) ν”„λ΅ν† μ½

λ°λ³µκ°€λ¥μ(iterable) ν”„λ΅ν† μ½μ€ κ°μ²΄κ°€ λ°λ³µμλ¥Ό λ°ν™ν•λ” ν‘μ¤€ν™”λ λ°©λ²•μ„ μ •μν•λ‹¤.  
μ΄λ¬ν• κ°μ²΄λ¥Ό **λ°λ³µκ°€λ¥μ**(iterable)λΌκ³  ν•λ‹¤.  
μΌλ°μ μΌλ΅ λ°λ³µκ°€λ¥μλ” μ”μ†λ“¤μ μ»¨ν…μ΄λ„λ΅ λ°μ΄ν„°κµ¬μ΅°μ™€ κ°™μ€ κ²ƒμ΄μ§€λ§, λ””λ ‰ν„°λ¦¬μ νμΌλ“¤μ„ λ°λ³µν•  μ μλ„λ΅ ν•λ” Directory κ°μ²΄μ™€ κ°™μ΄ μ”μ†λ“¤μ μ§‘ν•©μ„ κ°€μƒμ μΌλ΅ λ‚νƒ€λ‚΄λ” κ°μ²΄μΌ μλ„ μλ‹¤.

JavaScriptμ—μ„ μ°λ¦¬λ” **@@iterator ν•¨μ**, λ‹¬λ¦¬ λ§ν•΄, λ‚΄μ¥ μ‹¬λ³ΌμΈ Symbol.iterator ν•¨μλ¥Ό ν†µν•΄ μ ‘κ·Ό κ°€λ¥ν• ν•¨μλ¥Ό κµ¬ν„ν•μ—¬ λ°λ³µκ°€λ¥μλ¥Ό μ •μν•  μ μλ‹¤.

@@iterator ν•¨μλ” λ°λ³µμ κ°μ²΄λ¥Ό λ°ν™ν•΄μ•Ό ν•λ©°, λ°λ³µμ κ°μ²΄μ—μ„ ν‘ν„λλ” μ”μ†λ“¤μ„ λ°λ³µν•λ” λ° μ‚¬μ©ν•  μ μλ‹¤.

```tsx
//matrix.mjs
export class Matrix {
  constructor(inMatrix) {
    this.data = inMatrix;
  }

  get(row, column) {
    if (row >= this.data.length || column >= this.data[row].length) {
      throw new RangeError('Out of bounds');
    }
    return this.data[row][column];
  }

  set(row, column, value) {
    if (row >= this.data.length || column >= this.data[row].length) {
      throw new RangeError('Out of bounds');
    }
    this.data[row][column] = value;
  }

  [Symbol.iterator]() {
    let nextRow = 0;
    let nextCol = 0;

    return {
      next: () => {
        if (nextRow === this.data.length) {
          return { done: true };
        }
        const currVar = this.data[nextRow][nextCol];
        if (nextCol == this.data[nextRow].length - 1) {
          nextRow++;
          nextCol = 0;
        } else {
          nextCol++;
        }

        return { value: currVar };
      },
    };
  }
}
```

ν΄λμ¤μ—λ” ν–‰λ ¬μ κ°’μ„ νλ“ν•κ³  μ„¤μ •ν•λ” κΈ°λ³Έμ μΈ ν•¨μλ“¤κ³Ό λ°λ³µκ°€λ¥μ ν”„λ΅ν† μ½μ„ κµ¬ν„ν•λ” @@iterator ν•¨μκ°€ ν¬ν•¨λμ–΄ μλ‹¤.  
@@iterator ν•¨μλ” λ°λ³µκ°€λ¥μ ν”„λ΅ν† μ½μ— μ§€μ •λ λ€λ΅ λ°λ³µμλ¥Ό λ°ν™ν•λ©° μ΄ λ°λ³µμλ” λ°λ³µμ ν”„λ΅ν† μ½μ„ μ¤€μν•λ‹¤.

λ΅μ§μ€ κ° ν–‰μ κ° μ—΄μ„ μ¤μΊ”ν•μ—¬ μ™Όμ½ μƒλ‹¨μ—μ„ μ¤λ¥Έμ½ ν•λ‹¨μΌλ΅ μ΄λ™ν•λ©° λ°ν™ν•λ‹¤.  
nextRowμ™€ nextColμ΄λΌλ” λ‘ μΈλ±μ¤λ¥Ό μ‚¬μ©ν•μ—¬ μ΄λ¥Ό μν–‰ν•λ‹¤.

```tsx
//index.mjs
import { Matrix } from './matrix.mjs';

const matrix2x2 = new Matrix([
  ['11', '12'],
  ['21', '22'],
]);

const iterator = matrix2x2[Symbol.iterator]();
let iteratorResult = iterator.next();
while (!iteratorResult.done) {
  console.log(iteratorResult.value);
  iteratorResult = iterator.next();
}
//11
//12
//21
//22
```

## 9-4-3 λ„¤μ΄ν‹°λΈ JavaScript μΈν„°νμ΄μ¤λ΅μ„μ iteratorμ™€ iterable

ν‘μ¤€ν™”λ μΈν„°νμ΄μ¤λ¥Ό κ°€μ§€λ©΄ μ„ λ‘ κ°€μ§€ ν”„λ΅ν† μ½μ„ μ¤‘μ‹¬μΌλ΅ μ–Έμ–΄ μμ²΄λΏλ§ μ•„λ‹λΌ μ 3μμ μ½”λ“λ¥Ό λ¨λΈλ§ν•  μ μλ‹¤.  
μ΄λ° μ‹μΌλ΅ λ°λ³µκ°€λ¥μλ¥Ό μ…λ ¥ λ°›λ” λ¬Έμ¥λΏ μ•„λ‹λΌ APIλ„ κ°€μ§ μ μκ² λλ‹¤.  
λ°λ³µκ°€λ¥μλ¥Ό ν—μ©ν•λ” κ°€μ¥ λ¶„λ…ν• κµ¬λ¬Έμ€ for..of λ£¨ν”„μ΄λ‹¤.

```tsx
import { Matrix } from '../iterable/matrix.mjs';

const matrix2x2 = new Matrix([
  ['11', '12'],
  ['21', '22'],
]);

for (const element of matrix2x2) {
  console.log(element);
}
/**
11
12
21
22
 */
```

λ°λ³µκ°€λ¥μμ™€ νΈν™λλ” λ λ‹¤λ¥Έ κµ¬μ΅°λ” μ „κ° κµ¬λ¬Έ(spread operator)μ΄λ‹¤.

```tsx
import { Matrix } from '../iterable/matrix.mjs';

const matrix2x2 = new Matrix([
  ['11', '12'],
  ['21', '22'],
]);

const flattenedMatrix = [...matrix2x2];
console.log(flattenedMatrix); //[ '11', '12', '21', '22' ]
```

λΉ„μ·ν•κ², κµ¬μ΅° λ¶„ν•΄ ν• λ‹Ή(destructuring assignment)κ³Ό ν•¨κ» λ°λ³µκ°€λ¥μλ¥Ό μ‚¬μ©ν•  μλ„ μλ‹¤.

```tsx
import { Matrix } from '../iterable/matrix.mjs';

const matrix2x2 = new Matrix([
  ['11', '12'],
  ['21', '22'],
]);

const [a, b, c, d] = matrix2x2;
console.log(a, b, c, d); //11 12 21 22

const [a1, b1, c1, d1] = [...matrix2x2]; //ν™•μΈν•΄λ³΄κ³  μ‹¶μ–΄μ„ μ‘μ„±ν•κ±°...
console.log(a1, b1, c1, d1); //11 12 21 22
```

μ΄ μ™Έμ— μ•„λλ” λ°λ³µκ°€λ¥μλ¥Ό ν—μ©ν•λ” JavaScript λ‚΄μ¥ APIμ΄λ‹¤.

- Map([iterable])
- WeakMap([iterable])
- Set([iterable])
- WeakSet([iterable])
- Promise.all(iterable)
- Promise.race(iterable)
- Array.from(iterable)

λ…Έλ“ μΈ΅λ©΄μ—μ„ λ°λ³µκ°€λ¥μλ¥Ό ν—μ©ν•λ” μ£Όλ©ν•  λ§ν• APIλ” stream.Readable, from(iterable, [options])μ΄λ©°, λ°λ³µκ°€λ¥μ κ°μ²΄λ¥Ό μ½μ–΄ μ¤νΈλ¦Όμ„ μƒμ„±ν•λ‹¤.  
Javascript μμ²΄λ” μ„μ— λ³Έ API λ° κµ¬μ΅°μ—μ„ ν•¨κ» μ‚¬μ©ν•  μ μλ” λ§μ€ λ°λ³µκ°€λ¥μλ¥Ό μ •μν•κ³  μλ‹¤.  
κ°€μ¥ λ³Όλ§ν• λ°λ³µκ°€λ¥μλ” Arrayμ΄μ§€λ§, Map λ° Setκ³Ό κ°™μ€ λ‹¤λ¥Έ λ°μ΄ν„° κµ¬μ΅°, μ‹¬μ§€μ–΄λ” String μ΅°μ°¨λ„ @@iterator ν•¨μλ¥Ό κµ¬ν„ν•κ³  μλ‹¤.  
Node.js μμ—­μ—μ„ Bufferλ” μ•„λ§λ„ κ°€μ¥ μ£Όλ©ν•  λ§ν• λ°λ³µκ°€λ¥μμΌ κ²ƒμ΄λ‹¤.

<aside>
π’΅ λ°°μ—΄μ— μ¤‘λ³µ μ”μ†κ°€ ν¬ν•¨λμ–΄ μμ§€ μ•μ€μ§€ ν™•μΈν•λ” λ°©λ²•μ€ λ‹¤μκ³Ό κ°™λ‹¤.   
uniqArray = Array.from(new Set(arrayWithDuplicates)).   
μ΄κ²ƒμ€ λν• λ°λ³µκ°€λ¥μκ°€ μ–΄λ–»κ² κ³µμ  μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•μ—¬ μ„λ΅ λ‹¤λ¥Έ κµ¬μ„± μ”μ†λΌλ¦¬ ν†µμ‹ ν•  μ μλ” λ°©λ²•μ„ μ κ³µν•λ”μ§€ λ³΄μ—¬μ¤€λ‹¤.

</aside>
